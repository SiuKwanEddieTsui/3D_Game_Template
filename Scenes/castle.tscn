[gd_scene load_steps=18 format=3 uid="uid://dtqsn0y5f0xti"]

[ext_resource type="Script" path="res://addons/csg_mesher/src/CSGMesher.gd" id="1_nsqhh"]
[ext_resource type="Script" path="res://Scenes/Portal.gd" id="2_ohnel"]

[sub_resource type="CylinderMesh" id="CylinderMesh_bk53d"]
top_radius = 8.0
bottom_radius = 8.0
height = 20.0

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_h57bw"]
emission_enabled = true
emission = Color(0.678431, 0.678431, 0.678431, 1)
emission_energy_multiplier = 16.0

[sub_resource type="CylinderShape3D" id="CylinderShape3D_p4jc6"]
height = 20.0
radius = 8.0

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_c6ebp"]
emission_enabled = true
emission = Color(0.733333, 0.733333, 0.733333, 1)
emission_energy_multiplier = 16.0

[sub_resource type="BoxShape3D" id="BoxShape3D_goee3"]
size = Vector3(30, 20, 20)

[sub_resource type="BoxMesh" id="BoxMesh_1u262"]
size = Vector3(30, 20, 20)

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_uye44"]
emission_enabled = true
emission = Color(0.694118, 0.694118, 0.694118, 1)
emission_energy_multiplier = 16.0

[sub_resource type="BoxMesh" id="BoxMesh_uh6r0"]
size = Vector3(15, 15, 10)

[sub_resource type="BoxShape3D" id="BoxShape3D_ny0lu"]
size = Vector3(15, 15, 10)

[sub_resource type="CylinderMesh" id="CylinderMesh_d3hjw"]
top_radius = 0.0
bottom_radius = 9.0
height = 8.0

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_sdnja"]
albedo_color = Color(0.431373, 0.431373, 0.431373, 1)

[sub_resource type="CylinderShape3D" id="CylinderShape3D_qa0ej"]
height = 6.0
radius = 9.0

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_ref1v"]
albedo_color = Color(0.505882, 0.505882, 0.505882, 1)

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_357db"]
emission_enabled = true
emission = Color(1, 1, 0, 1)
emission_energy_multiplier = 16.0

[sub_resource type="BoxShape3D" id="BoxShape3D_db3yn"]
size = Vector3(10, 15, 5)

[node name="Castle" type="Node3D"]

[node name="StaticBody3D" type="StaticBody3D" parent="."]
collision_layer = 2

[node name="Tower2" type="MeshInstance3D" parent="StaticBody3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 35.922, 0, 0)
mesh = SubResource("CylinderMesh_bk53d")
surface_material_override/0 = SubResource("StandardMaterial3D_h57bw")

[node name="TowerCollider2" type="CollisionShape3D" parent="StaticBody3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 35.922, 0, 0)
shape = SubResource("CylinderShape3D_p4jc6")

[node name="Tower" type="MeshInstance3D" parent="StaticBody3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -36.0892, 0, 0)
mesh = SubResource("CylinderMesh_bk53d")
skeleton = NodePath("../..")
surface_material_override/0 = SubResource("StandardMaterial3D_c6ebp")

[node name="MainBodyCollider" type="CollisionShape3D" parent="StaticBody3D"]
shape = SubResource("BoxShape3D_goee3")

[node name="MainBody" type="MeshInstance3D" parent="StaticBody3D"]
mesh = SubResource("BoxMesh_1u262")
surface_material_override/0 = SubResource("StandardMaterial3D_uye44")

[node name="RightWing" type="MeshInstance3D" parent="StaticBody3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 22.5398, -2.5979, 0)
mesh = SubResource("BoxMesh_uh6r0")

[node name="RightWingCollider" type="CollisionShape3D" parent="StaticBody3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 22.5076, -2.57314, 0)
shape = SubResource("BoxShape3D_ny0lu")

[node name="LeftWing" type="MeshInstance3D" parent="StaticBody3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -22.344, -2.55059, 0)
mesh = SubResource("BoxMesh_uh6r0")
skeleton = NodePath("../RightWingCollider")

[node name="LeftWingCollider" type="CollisionShape3D" parent="StaticBody3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -22.3762, -2.52584, 0)
shape = SubResource("BoxShape3D_ny0lu")

[node name="TowerCollider" type="CollisionShape3D" parent="StaticBody3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -36.0892, 0, 0)
shape = SubResource("CylinderShape3D_p4jc6")

[node name="TowerRoof" type="MeshInstance3D" parent="StaticBody3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -35.9823, 13.8035, 0)
mesh = SubResource("CylinderMesh_d3hjw")
surface_material_override/0 = SubResource("StandardMaterial3D_sdnja")

[node name="TowerRoofCollider" type="CollisionShape3D" parent="StaticBody3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -35.9823, 13.8035, 0)
shape = SubResource("CylinderShape3D_qa0ej")

[node name="TowerRoof2" type="MeshInstance3D" parent="StaticBody3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 35.8522, 14.3087, -0.183086)
mesh = SubResource("CylinderMesh_d3hjw")
skeleton = NodePath("../TowerRoofCollider")
surface_material_override/0 = SubResource("StandardMaterial3D_ref1v")

[node name="TowerRoofCollider2" type="CollisionShape3D" parent="StaticBody3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 35.8522, 14.3087, -0.183086)
shape = SubResource("CylinderShape3D_qa0ej")

[node name="CSGMesher" type="CSGCombiner3D" parent="StaticBody3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 17.3874, 0)
operation = 2
script = ExtResource("1_nsqhh")

[node name="CSGBox3D" type="CSGBox3D" parent="StaticBody3D/CSGMesher"]
size = Vector3(15, 15, 3)
material = SubResource("StandardMaterial3D_357db")

[node name="CSGCylinder3D" type="CSGCylinder3D" parent="StaticBody3D/CSGMesher/CSGBox3D"]
transform = Transform3D(1, 0, 0, 0, -0.00307182, -0.999995, 0, 0.999995, -0.00307182, 0, 1.33382, 0)
operation = 2
radius = 5.0
height = 5.0
sides = 64

[node name="CSGBox3D" type="CSGBox3D" parent="StaticBody3D/CSGMesher/CSGBox3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -2.84147, 0)
operation = 2
size = Vector3(10, 10, 4)

[node name="Portal" type="Area3D" parent="StaticBody3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 17.5801, 0)
collision_layer = 2
script = ExtResource("2_ohnel")
level_to_load = "res://Levels/level_2.tscn"

[node name="CollisionShape3D" type="CollisionShape3D" parent="StaticBody3D/Portal"]
shape = SubResource("BoxShape3D_db3yn")

[connection signal="body_entered" from="StaticBody3D/Portal" to="StaticBody3D/Portal" method="_on_body_entered"]
[connection signal="body_exited" from="StaticBody3D/Portal" to="StaticBody3D/Portal" method="_on_body_exited"]
